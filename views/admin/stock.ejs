<html>
<%- include ../partials/head.ejs %>
<body>
<div class="container">
    <%- include menu.ejs %>
    <div class="row">
        <div class="col-sm-12 col-md-12">
            <div class="row" style="background: gray; padding: 8px 0; margin: 8px 0;">
                <div class="col-sm-3 col-md-3">Photo</div>
                <div class="col-sm-2 col-md-2">Name</div>
                <div class="col-sm-2 col-md-2">Price</div>
                <div class="col-sm-3 col-md-3">Amount</div>
                <div class="col-sm-2 col-md-2">Action</div>
            </div>
            <% items.forEach(function(item) { %>
            <div class="row">
                <form action="/admin/stock/<%- item.id %>" method="post" enctype="application/x-www-form-urlencoded">
                    <div class="col-sm-3 col-md-3">
                        <% if(item.photo) { %>
                        <img src="/photo/<%- item.photo %>" style="max-width: 100px; max-height: 100px;">
                        <% } else { %>
                        <img src="/img/default.jpg" style="max-width: 100px; max-height: 100px;">
                        <% } %>
                    </div>
                    <div class="col-sm-2 col-md-2">
                        <%- item.name %>
                    </div>
                    <div class="col-sm-2 col-md-2">
                        <div class="form-group">
                            大份價錢: <%- item.price.big %>
                        </div>
                        <div class="form-group">
                            小份價錢: <%- item.price.small %>
                        </div>
                    </div>
                    <div class="col-sm-3 col-md-3">
                        <div class="form-group">
                            <label>大份數量</label>
                            <input class="form-control" type="number" name="amountBig" value="<%- item.amount.big %>">
                        </div>
                        <div class="form-group">
                            <label>小份數量</label>
                            <input class="form-control" type="number" name="amountSmall"
                                   value="<%- item.amount.small %>">
                        </div>
                    </div>
                    <div class="col-sm-2 col-md-2">
                        <button class="btn btn-default update">Update</button>
                    </div>
                </form>
            </div>
            <% }) %>

        </div>
    </div>
</div>
</body>
<script>
    $(document).ready(function () {

        var updateBtn = $('.btn.update');

        updateBtn.click(function () {

            $(this).attr('disabled', 'disabled');
            $(this).text('正在更新中...');
        });
    }
</script>
</html>